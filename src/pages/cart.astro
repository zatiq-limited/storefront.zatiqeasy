---
/**
 * ========================================
 * CART PAGE
 * ========================================
 * 
 * Backend API Endpoints:
 * 
 * GET /api/storefront/v1/cart
 * - Returns: Current cart items
 * 
 * POST /api/storefront/v1/cart/add
 * - Body: { variantId, quantity }
 * - Returns: Updated cart
 * 
 * PUT /api/storefront/v1/cart/update
 * - Body: { lineItemId, quantity }
 * - Returns: Updated cart
 * 
 * DELETE /api/storefront/v1/cart/remove
 * - Body: { lineItemId }
 * - Returns: Updated cart
 */

import Layout from '../layouts/main.astro';
import { mockTheme } from '../data/mock-theme';

// In production, fetch cart from API
// const cart = await fetch('/api/storefront/v1/cart').then(r => r.json())
const cart = {
	items: [],
	itemCount: 0,
	subtotal: 0,
	total: 0
};
---

<Layout 
	title={`Shopping Cart | ${mockTheme.templates.index.seo?.title}`}
	description="Your shopping cart"
>
	<div class="container mx-auto px-4 py-8">
		<h1 class="text-3xl font-bold mb-8">Shopping Cart</h1>
		
		{cart.items.length === 0 ? (
			<div class="text-center py-12">
				<p class="text-gray-600 mb-4">Your cart is empty</p>
				<a href="/" class="inline-block px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
					Continue Shopping
				</a>
			</div>
		) : (
			<div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
				<div class="lg:col-span-2">
					{/* Cart items will be rendered here */}
					<p>Cart items component will be integrated here</p>
				</div>
				<div class="lg:col-span-1">
					{/* Cart summary */}
					<div class="bg-gray-50 p-6 rounded-lg">
						<h2 class="text-xl font-semibold mb-4">Order Summary</h2>
						<div class="space-y-2 mb-4">
							<div class="flex justify-between">
								<span>Subtotal</span>
								<span>${cart.subtotal.toFixed(2)}</span>
							</div>
							<div class="flex justify-between">
								<span>Shipping</span>
								<span>Calculated at checkout</span>
							</div>
						</div>
						<div class="border-t pt-4 mb-4">
							<div class="flex justify-between font-bold text-lg">
								<span>Total</span>
								<span>${cart.total.toFixed(2)}</span>
							</div>
						</div>
						<a href="/checkout" class="block w-full text-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
							Proceed to Checkout
						</a>
					</div>
				</div>
			</div>
		)}
	</div>
</Layout>
