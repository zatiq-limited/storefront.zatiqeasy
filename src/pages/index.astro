---
/**
 * ========================================
 * HOMEPAGE
 * ========================================
 * 
 * Backend API Endpoint:
 * GET /api/storefront/v1/page/index
 * 
 * Response:
 * {
 *   template: Template,
 *   pageData: {
 *     featuredProducts: Product[],
 *     collections: Collection[],
 *     reviews: Review[]
 *   }
 * }
 */

import Layout from '../layouts/main.astro';
import TemplateRenderer from '../components/TemplateRenderer';
import { mockTheme } from '../data/mock-theme';
import { mockProducts } from '../data/mock-products';

// Get homepage template from theme
const homepageTemplate = mockTheme.templates.index;

// In production, this data will come from API
// const pageData = await fetch('/api/storefront/v1/page/index').then(r => r.json())
const pageData = {
	featuredProducts: mockProducts.slice(0, 8),
	collections: [],
	reviews: []
};
---

<Layout 
	title={homepageTemplate.seo?.title}
	description={homepageTemplate.seo?.description}
	image={homepageTemplate.seo?.image}
>
	<TemplateRenderer template={homepageTemplate} client:load />
</Layout>
